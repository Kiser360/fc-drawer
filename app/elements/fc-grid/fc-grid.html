<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="fc-grid">
  <template>
    <style>
      :host {
        position:relative;
        display: flex;
        flex-flow:row wrap;
        height:0;
        padding-bottom:80vmin;
        width:80vmin;
        font-size:0;
      }
      .colorSpot {
        display:inline-block;
        margin:1vmin;
        padding:0;
        height:8vmin;
        width:8vmin;
        background:cyan;
        border-radius:50%;
      }
    </style>
    <template is="dom-repeat" items="{{pixels}}" indexAs="index">
      <span id="{{computeIndex(index)}}" class="colorSpot" onClick="{{pixelTap}}"></span>
    </template>
  </template>

  <script>
    (function () {
      'use strict';

      Polymer({
        is: 'fc-grid',
        properties: {
          pixels: {
            type: Array,
            notify: true
          },
          color: {
            type: String,
            notify: false
          }
        },
        listeners: {
          'tap': 'onClick',
          'click': 'onClick'
        },
        computeIndex: function(index) {
          return "pixel-" + index;
        },
        onClick: function(e){
          if (e.target.id.indexOf("pixel") === 0) {
            this.set(['pixels', e.target.id.split('-')[1]], this.color);
            e.target.style.background = this.color;
          }
        },
        ready: function() {
          this.color = "#000";
          this.pixels = [];
          for (var i = 0; i < 64; i++) {
            this.pixels.push(this.color);
          }
        }
      });
    })();
  </script>

</dom-module>